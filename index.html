<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
    crossorigin="anonymous"></script>

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <title>Work Day Scheduler</title>
</head>

<body>
  <header class="jumbotron">
    <h1 class="display-3">Work Day Scheduler</h1>
    <p class="lead">A simple calendar app for scheduling your work day</p>
    <p id="currentDay" class="lead"></p>
  </header>
  <div class="container">
    <!-- Timeblocks go here -->
    <div class="row">
      <div class="col-1">
        <p id="9" class="hour">9 AM</p>
      </div>
      <div class="col-10"><textarea id="00" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s1 " id="0">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="10" class="hour">10 AM</p>
      </div>
      <div class="col-10"><textarea id="11" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s2" id="1">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="11" class="hour">11 AM</p>
      </div>
      <div class="col-10"><textarea id="22" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s3" id="2">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="12" class="hour">12 PM</p>
      </div>
      <div class="col-10"><textarea id="33" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s4" id="3">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="13" class="hour">1 PM</p>
      </div>
      <div class="col-10"><textarea id="44" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s5" id="4">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="14" class="hour">2 PM</p>
      </div>
      <div class="col-10"><textarea id="55" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s6" id="5">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="15" class="hour">3 PM</p>
      </div>
      <div class="col-10"><textarea id="66" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s7" id="6">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="16" class="hour">4 PM</p>
      </div>
      <div class="col-10"><textarea id="77" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s8" id="7">Save</button>
      </div>
    </div>
    <div class="row">
      <div class="col-1">
        <p id="17" class="hour">5 PM</p>
      </div>
      <div class="col-10"><textarea id="88" class="form-control"></textarea></div>
      <div class="col-1"><button type="button" class="btn  saveBtn s9" id="8">Save</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

  <script>

    $("#currentDay").html(`${moment().format("dddd MMM Do")}`)

    function colorArea() {
      for (var i = 0; i < 9; i++) {
        var rowTime = $(".hour").get(i).id;
        var x = moment().format('H');
        actualTime = parseInt(x);
        // var actualTime = 12;
        if (rowTime < actualTime) {
          $(`#${i}${i}`).addClass("past");
        }
        else if (rowTime > actualTime) {
          $(`#${i}${i}`).addClass("future");
        }
        else {
          $(`#${i}${i}`).addClass("present");
        }
      }
    }
    colorArea()

    document.querySelector('.s1').addEventListener("click", triggerButton)
    document.querySelector('.s2').addEventListener("click", triggerButton)
    document.querySelector('.s3').addEventListener("click", triggerButton)
    document.querySelector('.s4').addEventListener("click", triggerButton)
    document.querySelector('.s5').addEventListener("click", triggerButton)
    document.querySelector('.s6').addEventListener("click", triggerButton)
    document.querySelector('.s7').addEventListener("click", triggerButton)
    document.querySelector('.s8').addEventListener("click", triggerButton)
    document.querySelector('.s9').addEventListener("click", triggerButton)

    var arraytest = []
    function triggerButton() {
      var form = {
        row1: $('#00').val(),
        row2: $('#11').val(),
        row3: $('#22').val(),
        row4: $('#33').val(),
        row5: $('#44').val(),
        row6: $('#55').val(),
        row7: $('#66').val(),
        row8: $('#77').val(),
        row9: $('#88').val()

      }
      console.log(`form contents: `, form)
      localStorage.form = JSON.stringify(form)
      console.log(`.. form saved as: `, localStorage.form)
    }

    function dataOnLoad() {
      if(localStorage.form){
      var retrievedObject = localStorage.form;
      arraytest = JSON.parse(retrievedObject)
       $('#00').val(`${arraytest["row1"]}`) 
       $('#11').val(`${arraytest["row2"]}`)
       $('#22').val(`${arraytest["row3"]}`) 
       $('#33').val(`${arraytest["row4"]}`) 
       $('#44').val(`${arraytest["row5"]}`)
       $('#55').val(`${arraytest["row6"]}`) 
       $('#66').val(`${arraytest["row7"]}`) 
       $('#77').val(`${arraytest["row8"]}`) 
       $('#88').val(`${arraytest["row9"]}`) 
      }
    }
    dataOnLoad()
// var retrievedObject = localStorage.getItem('arraytest');
// arraytest = JSON.parse(retrievedObject)
// -------------------------------------------
// if( localStorage.form ){
//           var savedForm = JSON.parse( localStorage.form )
//           console.log( ` found savedForm: `, savedForm )

//           document.querySelector("#first-name").value = savedForm.firstName
//           document.querySelector("#last-name").value = savedForm.lastName
//           document.querySelector("#email").value = savedForm.email
//           document.querySelector("#password").value = savedForm.password
//         }
//         // runs on click
//         var signUpButton = document.querySelector("#sign-up");
//         signUpButton.addEventListener("click", function(event) {
//           event.preventDefault();

//           console.log( `[SaveButton] clicked` )
//           // gather all the INPUTS
//           // put them in an object
//           // save that object to localStorage

//           var form = {
//             row1: $('#00').val(),
//             row2: $('#00').val(),
//             row3: $('#00').val(),
//             row4: $('#00').val(),
//             row5: $('#00').val(),
//             row6: $('#00').val(),
//             row7: $('#00').val(),
//             row8: $('#00').val(),
//             row9: $('#00').val()

//           }
//           console.log( `form contents: `, form )
//           localStorage.form = JSON.stringify( form )
//           console.log( `.. form saved as: `, localStorage.form )

//         });



  </script>
</body>

</html>